<!-- <div class="container-fluid mt-5 px-5" *ngIf="this.notifiers == undefined ||  this.notifiers == null">
  <app-loading></app-loading>
</div> -->

<div class="container-fluid mt-5 px-5">
  <div *ngIf="isNewTransactionBtnClicked == true">
    <ejs-dialog id='dialog' #dialog isModal='true' showCloseIcon='true' (open)="onAddNewTransaction()"
      (overlayClick)="onOverlayClick()" [target]='targetElement' width='auto'>

      <ng-template #content>
        <div class="col-md-12 col">
          <div class='e-btn-group e-round-corner'>
            <button (click)="onChangeFormModel('Buy')" class="{{ getButtonClass('Buy') }}" ejs-button> Transaction Buy </button>
            <button (click)="onChangeFormModel('Sell')" class="{{ getButtonClass('Sell') }}" ejs-button> Transaction Sell </button>
            <button (click)="onChangeFormModel('In')" class="{{ getButtonClass('In') }}" ejs-button> Transaction In </button>
            <button (click)="onChangeFormModel('Out')" class="{{ getButtonClass('Out') }}" ejs-button> Transaction Out </button>
          </div>
        </div>
        <app-transaction-sell *ngIf="this.selectedFormValue == 'Sell'" [coinsBinance]="data"></app-transaction-sell>
        <app-transaction-buy *ngIf="this.selectedFormValue == 'Buy'" [coinsBinance]="data"></app-transaction-buy>
        <app-transaction-in *ngIf="this.selectedFormValue == 'In'" [coinsBinance]="data"></app-transaction-in>
        <app-transaction-out *ngIf="this.selectedFormValue == 'Out'" [coinsBinance]="data"></app-transaction-out>
      </ng-template>
      <ng-template #header>
        <h4>Create new notifier</h4>
      </ng-template>
    </ejs-dialog>
  </div>
  <div class="row">
    <div tabindex="0" class="e-card" id="basic">
      <div class="e-card-header">
        <div class="e-card-header-caption">
          <div class="e-card-title">

          </div>
        </div>
      </div>
      <div class="e-card-content">
        <div class="row">
          <div class="col-md-5 ms-5 text-left" style="padding-bottom: 50px;">
            <button type="submit" iconCss="e-icons e-save-icon" ejs-button isPrimary="true"
              (click)="onAddNewTransaction()"> Create new subscription</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container-fluid mt-5 px-5" *ngIf="this.transactions.length > 0">
  <ejs-grid #grid [dataSource]="transactions" [allowPaging]="true" [allowSorting]="true" [pageSettings]="pageSettings"
    [editSettings]="editSettings" [toolbar]="toolbar" [enableImmutableMode]='true'  [rowHeight]='60'
    >
    <e-columns>
      <e-column headerText='Coin' width=33 textAlign="Left">
        <ng-template #template let-data>
          <div class="image">
            <img [src]="data.iconPath" width="32px" (error)="data.iconPath='../../assets/default.png'" [alt]="data.name" />
          </div>
        </ng-template>
      </e-column>
      <e-column isPrimaryKey="true" field='Id' headerText='Id' width=30 [visible]="false"></e-column>
      <e-column field='Price' headerText='Price' textAlign='Right' width=40></e-column>
      <e-column field='Amount' headerText='Amount' textAlign='Left' width=40></e-column>


      <e-column field='Fee' headerText='Fee' textAlign='Right' width=40>
      </e-column>
      <e-column field='CoinSymbol' headerText='CoinSymbol' textAlign='Right' width=50 format='c2'></e-column>
      <e-column field="viewdetails" headerText="Buy" textAlign="Left" width="30">
        <ng-template #template let-data>
          <div><a href="https://www.binance.com/en/trade/{{data.symbol}}_USDT?theme=light&type=spot">
              <i class="fa-solid fa-store"></i> </a>
          </div>
        </ng-template>
      </e-column>
    </e-columns>
  </ejs-grid>
</div>
